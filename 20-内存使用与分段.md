### 内存使用与分段
---
- 内存如何使用
- 将程序放在内存中 PC是专门用于在CPU取指令期间寻址程序存储器 PC寄存器指向开始地址
-  CS的全拼为“Code segment”，即代码段寄存器，对应于内存中的存放代码的内存区域，用来存放内存代码段区域的入口地址（段基址）
- 指令指针寄存器IP，里面放置的是不是指令，而是一个指向下一个将要去获取的指令的内存地址（所以它是一个指针）
- CPU在执行指令时，通过代码寄存器CS和指令指针寄存器IP（instruction Pointer）来确定要执行的下一条指令的内存地址
- CS:IP 两个寄存器指示了CPU当前要读取的指令地址，计算方式一般为CS左移4位然后加上IP寄存器，作为地址去取内容
---
- 重定位 修改程序中的地址(相对地址)
- 什么时候完成重定位
- 编译时重定位的程序只能放在内存固定位置
- 编译时 不灵活 
- 载入时重定位的程序一旦载入内存就不能动了
- 载入时做
---
- 若载入后还需要移动 - 交换
- 进程从内存中换入换出
- 重定位最合适的时机 - 运行时重定位
- 运行每条重定位时才完成重定位
- 每执行一条指令都要从逻辑地址算出物理地址 - 地址翻译
- base + offset
- 基地址存放在PCB中
- 执行指令时第一步从PCB中取出这个基地址
- 进程切换时根据PCB切换一起切换这个基地址
---
- 内存分段
- 引入分段 是将整个程序一起载入内存中吗
---
- 在程序员眼中的程序
- 由若干部分(段)组成 每个段有各自的特点 用途
- 代码段只读 代码/数据段不会动态增长
- 主程序 变量集 函数库 动态数组 栈
- 只读 可写
- main data sin array stack
- 符合用户观点 用户可独立考虑每个段(分治)
- 怎么定位具体数据 <段号 段内偏移>
- 进程段表
- 进程分段的基址分别存放在LDT中

